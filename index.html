<div id="news"></div>

<script>
async function loadNews() {
  const rssUrl = "https://www.fxstreet.com/rss/news";
  const response = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(rssUrl));
  const data = await response.json();
  const xml = new DOMParser().parseFromString(data.contents, "text/xml");
  const items = Array.from(xml.querySelectorAll("item"));

  // lọc chỉ tin vàng
  let goldNews = items.filter(item => {
    const t = item.querySelector("title").textContent.toLowerCase();
    return t.includes("xau") || t.includes("vàng") || t.includes("gold");
  });

  // sắp xếp theo pubDate mới nhất
  goldNews.sort((a, b) => new Date(b.querySelector("pubDate").textContent) - new Date(a.querySelector("pubDate").textContent));

  // lấy 3 tin mới nhất
  goldNews = goldNews.slice(0, 3);

  // render
  const container = document.getElementById("news");
  container.innerHTML = goldNews.map(item => {
    const title = item.querySelector("title").textContent;
    const link = item.querySelector("link").textContent;
    const pubDate = new Date(item.querySelector("pubDate").textContent).toLocaleString("vi-VN");
    return `
      <div style="margin-bottom:10px;">
        <a href="${link}" target="_blank"><b>${title}</b></a><br>
        <small>🕒 ${pubDate}</small>
      </div>
    `;
  }).join("");
}

// load lần đầu
loadNews();

// auto refresh mỗi 5 phút
setInterval(loadNews, 5 * 60 * 1000);
</script>
