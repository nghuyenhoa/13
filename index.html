<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tin tức vàng (VN)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #fafafa; }
    .news { margin-bottom: 20px; padding: 12px; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .time { font-size: 0.9em; color: gray; margin-top: 4px; }
    a { text-decoration: none; color: #0066cc; font-weight: bold; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div id="gold-news">⏳ Đang tải tin...</div>

  <script>
    const URL = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://www.fxstreet-vn.com/markets/commodities/metals/gold");

    async function fetchNews() {
      try {
        let res = await fetch(URL);
        let data = await res.json();
        let html = data.contents;

        // tìm tin (thẻ article hoặc div chứa tiêu đề)
        let parser = new DOMParser();
        let doc = parser.parseFromString(html, "text/html");
        let articles = doc.querySelectorAll(".fxs_entry"); // class của tin bài

        let container = document.getElementById("gold-news");
        container.innerHTML = "";

        articles.forEach((el, i) => {
          if (i < 3) { // lấy 3 tin đầu
            let titleEl = el.querySelector(".fxs_headline a");
            let timeEl = el.querySelector("time");
            let title = titleEl ? titleEl.textContent.trim() : "Không có tiêu đề";
            let link = titleEl ? "https://www.fxstreet-vn.com" + titleEl.getAttribute("href") : "#";
            let time = timeEl ? timeEl.textContent.trim() : "";

            container.innerHTML += `
              <div class="news">
                <a href="${link}" target="_blank">${title}</a>
                <div class="time">${time}</div>
              </div>
            `;
          }
        });

        if (container.innerHTML === "") {
          container.innerHTML = "<p>❌ Không lấy được tin.</p>";
        }
      } catch (err) {
        console.error(err);
        document.getElementById("gold-news").innerHTML = "<p>⚠️ Lỗi khi tải tin.</p>";
      }
    }

    fetchNews();
    setInterval(fetchNews, 120000); // 2 phút reload
  </script>
</body>
</html>
