import fetch from "node-fetch";
import * as cheerio from "cheerio";

const URL = "https://www.fxstreet-vn.com/markets/commodities/metals/gold";

async function getGoldNews() {
  const res = await fetch(URL);
  const html = await res.text();
  const $ = cheerio.load(html);

  let news = [];
  $(".fxs_entry").each((i, el) => {
    if (i < 3) {
      news.push({
        title: $(el).find(".fxs_headline").text().trim(),
        link: "https://www.fxstreet-vn.com" + $(el).find("a").attr("href"),
        time: $(el).find("time").text().trim()
      });
    }
  });

  return news;
}

getGoldNews().then(data => console.log(data));
